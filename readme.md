## Сервис рассылки

Сервис управления рассылками API администрирования и получения статистики.

## Установка

Вы можете скачать этот репозиторий запустить сервис с командой docker compose up

## Handlers

# /user
POST

Отправляем запрос с таким JSON:
1. Телефон
2. Тэг
3. Временная зона

```bash
{
    "tel": 72533325333,
    "tag": "",
    "tz": 1
}
```
DELETE

Удаление пользователя по id

PUT
Менять параметры пользователя

Отправляем запрос с таким JSON:
1. Телефон
2. Тэг
3. Временная зона

```bash
{
    "tel": 70000000000,
    "tag": "Тэг",
    "tz": 1
}
```

# /userbytag

GET
Получаем пользователей с определенным тэгом

Отправляем запрос с URL параметром tag


# /messanger

POST

Создаем новую рассылку.

Оправляем такой JSON:

```bash
{
    "time_start": "2023-09-18T17:24:27+03:00",
    "time_end": "2023-09-18T17:25:27+03:00",
    "message_text": "Сообщение",
    "filter": "Тэг"
}
```
PUT

Меняем рассылку. Меняем только фильтр и текст сообщения.
Оправляем такой JSON:

```bash
{
    "id": 1,
    "message_text": "Сообщение",
    "filter": "Тэг"
}
```
Функционал перезапуска рассылки после изменения недописан.


# /messanger/messages

GET

Получаем все сообщения по id рассылки.
Передаем id в url параметре.

# /messanger/allmessages

Получаем все сообщения с деталями для статистики.


## Доп задания

Установка с помощью docker compose up.

API доступен по localhost:3013
База данных по localhost:3014

При перезагрузке сервера все "будущие" рассылки автоматически запускаются на нужное время.

